MK controller

stm32f103c8t6主控

/////////////////////////////////////////////////////////////////////////////////
si24r1芯片的无线2.4G，反着装是因为被嘉立创的封装给坑了，实测10m无遮挡可以正常通信

/////////////////////////////////////////////////////////////////////////////////
1.69寸lcd屏幕

/////////////////////////////////////////////////////////////////////////////////
2*摇杆

按下无实际功能，你也加不了功能，因为我画错了：）

左右摇杆都是上下为操纵光标选择，左为退出，右为进入（仅在菜单生效）

在遥控中，默认为左手油门，右手方向，如需改为右油左舵仅需将最右侧拨码开关向上拨动

在波形中，左右摇杆相同作用，即左右控制波形宽度，上下控制波形高度

在调参中，左摇杆左右选择更改位数，右摇杆左右操控滑动条更改数据

/////////////////////////////////////////////////////////////////////////////////
七个按键

左侧单独按键预计作为启停按键无论在任何时刻都可以停车启动，但太懒没加，后续肯定会加；

右侧从上往下分别是上，下，返回，确认，
在参数修改界面中分别为回档，回档，返回，确认，
在遥控界面及波形图界面为无作用，无作用，返回，无作用；

开关右侧俩开关从上到下分别是RST和唤醒，其中唤醒没有实际作用，因为我没写休眠：）

/////////////////////////////////////////////////////////////////////////////////
拨码开关

从左到右分别为boot0，boot1和两个功能拨码

boot0，boot1默认低电平，拨到上面为高电平方便烧录

功能拨码仅最右侧为切换遥控模式，其他应用仍在探索中

/////////////////////////////////////////////////////////////////////////////////
引出排针

左右摇杆下分别有俩烧录口，左侧会和摇杆打架，所以不是大开发的话最好不要焊接，直接用探针也很方便

左侧从上到下分别为：GND 3V3 PA9 PA10 PA13 PA14
右侧从上到下分别为：PA14 PA13 3V3 GND

如果使用stlink烧录的话可以只焊接右侧或左侧，左侧仅为串口烧录多提供接口

/////////////////////////////////////////////////////////////////////////////////
灯光

LED1为电源指示灯
LED2为发送指示灯
LED3为接收指示灯

LED4和LED6为摇杆指示灯
LED5和LED7为摇杆按下指示灯

/////////////////////////////////////////////////////////////////////////////////
MICRO-USB

本版本usb仅作为供电使用，无烧录仿真作用

/////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////
关于程序

主函数中每1ms进入一次按键扫描，将获得的值储存在F_KEY_Down[]数组中，MK_menu.c中的final_menu为主要函数，其中通过查表的方式来显示菜单及到相应函数中执行不同类型显示

所有注释都很全面，完全可以自己学习

其中无线协议为：发送长度为10的数组，从0-9分别为：主机序号1，主机序号2，更改变量序号，发送数据或是发送请求，小数类变量的两位整数位，小数类变量的两位小数位，整数类变量1的高位，整数类变量1的低位，整数类变量2的高位，整数类变量2的低位

/////////////////////////////////////////////////////////////////////////////////
半双工实现方法（调参和波形界面使用）：

主机发送需要数据信息成功后设置为接受模式，等待接收到有效数据后设置为发送模式发送，以此循环

从机接收到需要数据信息后转化为发送模式，等待顺利发送后设置为接受模式等待下一次数据到来，以此循环

细节建议自己看代码

最后更改时间：2024.8.12